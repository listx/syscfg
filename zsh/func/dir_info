#!/usr/bin/env zsh

# dir_info(), a function that acts as an intelligent "ls". This function is
# used by univ_open() to display directory contents, but can be used independently.

dir_info() {
	local file_count
	local mode

	# NOP if there is nothing to show.
	file_count=$(ls -A1 | wc -l)
	if (( file_count == 0 )); then
		echo "($PWD is empty)"
		return
	fi

	mode="${1:-}"

	case "${mode}" in
		verbose-by-name)
			ls -Aho --time-style=long-iso --color | tail -n +2
			;;
		verbose-by-size)
			ls -AhoSr --time-style=long-iso --color | tail -n +2
			;;
		verbose-by-date)
			ls -Ahotr --time-style=long-iso --color | tail -n +2
			;;
		*)
			ls -C -w $COLUMNS --color
			;;
	esac
}
