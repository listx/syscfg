key_bindings:
  # Vi Mode
  # Custom Vi mode bindings.
  - { key: Y,         mode: ~Vi, mods: Super,       action: ToggleViMode         }
  # Paste.
  - { key: P,         mode: ~Vi, mods: Super,       action: Paste                }
  - { key: P,         mode:  Vi,                    action: Paste                }

  # Distinguish between problematic keys (such as C-<key> and C-S-<key>) via
  # manual `CSI u` support. See https://iterm2.com/documentation-csiu.html for a
  # background around `CSI u` aka `libtickit`, and
  # https://github.com/alacritty/alacritty/issues/3101 for the upstream issue to
  # enable native `CSI u` support in Alacritty.
  #
  # The list
  # here is drawn from
  # https://github.com/alexherbo2/alacritty-extended-keys/blob/bc08749ae8fd9f8e00d0c93f96d5c67c244c6480/keys.yml#L16.

  # Alt + <key> ------------------------------

  # Notice how these are technically still the upper-case ASCII codepoints
  # (65-90); this still works because it appears that the modifier keys are
  # strictly interpreted from the `;...` portion, not the key itself in the
  # `...;` portion.
  - { key: A, mods: Alt, chars: "\x1ba" }
  - { key: B, mods: Alt, chars: "\x1bb" }
  - { key: C, mods: Alt, chars: "\x1bc" }
  - { key: D, mods: Alt, chars: "\x1bd" }
  - { key: E, mods: Alt, chars: "\x1be" }
  - { key: F, mods: Alt, chars: "\x1bf" }
  - { key: G, mods: Alt, chars: "\x1bg" }
  - { key: H, mods: Alt, chars: "\x1bh" }
  - { key: I, mods: Alt, chars: "\x1bi" }
  - { key: J, mods: Alt, chars: "\x1bj" }
  - { key: K, mods: Alt, chars: "\x1bk" }
  - { key: L, mods: Alt, chars: "\x1bl" }
  - { key: M, mods: Alt, chars: "\x1bm" }
  - { key: N, mods: Alt, chars: "\x1bn" }
  - { key: O, mods: Alt, chars: "\x1bo" }
  - { key: P, mods: Alt, chars: "\x1bp" }
  - { key: Q, mods: Alt, chars: "\x1bq" }
  - { key: R, mods: Alt, chars: "\x1br" }
  - { key: S, mods: Alt, chars: "\x1bs" }
  - { key: T, mods: Alt, chars: "\x1bt" }
  - { key: U, mods: Alt, chars: "\x1bu" }
  - { key: V, mods: Alt, chars: "\x1bv" }
  - { key: W, mods: Alt, chars: "\x1bw" }
  - { key: X, mods: Alt, chars: "\x1bx" }
  - { key: Y, mods: Alt, chars: "\x1by" }
  - { key: Z, mods: Alt, chars: "\x1bz" }
  - { key: Period, mods: Alt, chars: "\x1b[46;3u" } # M-.
  - { key: Semicolon, mods: Alt|Shift, chars: "\x1b[58;3u" } # M-:

  # Alt + Shift + <key> ----------------------------

  - { key: A, mods: Alt|Shift, chars: "\x1bA" }
  - { key: B, mods: Alt|Shift, chars: "\x1bB" }
  - { key: C, mods: Alt|Shift, chars: "\x1bC" }
  - { key: D, mods: Alt|Shift, chars: "\x1bD" }
  - { key: E, mods: Alt|Shift, chars: "\x1bE" }
  - { key: F, mods: Alt|Shift, chars: "\x1bF" }
  - { key: G, mods: Alt|Shift, chars: "\x1bG" }
  - { key: H, mods: Alt|Shift, chars: "\x1bH" }
  - { key: I, mods: Alt|Shift, chars: "\x1bI" }
  - { key: J, mods: Alt|Shift, chars: "\x1bJ" }
  - { key: K, mods: Alt|Shift, chars: "\x1bK" }
  - { key: L, mods: Alt|Shift, chars: "\x1bL" }
  - { key: M, mods: Alt|Shift, chars: "\x1bM" }
  - { key: N, mods: Alt|Shift, chars: "\x1bN" }
  - { key: O, mods: Alt|Shift, chars: "\x1bO" }
  - { key: P, mods: Alt|Shift, chars: "\x1bP" }
  - { key: Q, mods: Alt|Shift, chars: "\x1bQ" }
  - { key: R, mods: Alt|Shift, chars: "\x1bR" }
  - { key: S, mods: Alt|Shift, chars: "\x1bS" }
  - { key: T, mods: Alt|Shift, chars: "\x1bT" }
  - { key: U, mods: Alt|Shift, chars: "\x1bU" }
  - { key: V, mods: Alt|Shift, chars: "\x1bV" }
  - { key: W, mods: Alt|Shift, chars: "\x1bW" }
  - { key: X, mods: Alt|Shift, chars: "\x1bX" }
  - { key: Y, mods: Alt|Shift, chars: "\x1bY" }
  - { key: Z, mods: Alt|Shift, chars: "\x1bZ" }

  # Control + <key> ------------------------------
  # NOTE: Unfortunately this breaks Zsh when invoked directly from Alacritty.
  # The only way to use Zsh correctly is through tmux.

  - { key: A, mods: Control, chars: "\x01" }
  - { key: B, mods: Control, chars: "\x02" }
  - { key: C, mods: Control, chars: "\x03" }
  - { key: D, mods: Control, chars: "\x04" }
  - { key: E, mods: Control, chars: "\x05" }
  - { key: F, mods: Control, chars: "\x06" }
  - { key: G, mods: Control, chars: "\x07" }
  - { key: H, mods: Control, chars: "\x08" }
  - { key: I, mods: Control, chars: "\x09" }
  - { key: J, mods: Control, chars: "\x0A" }
  - { key: K, mods: Control, chars: "\x0B" }
  - { key: L, mods: Control, chars: "\x0C" }
  - { key: M, mods: Control, chars: "\x0D" }
  - { key: N, mods: Control, chars: "\x0E" }
  - { key: O, mods: Control, chars: "\x0F" }
  - { key: P, mods: Control, chars: "\x10" }
  - { key: Q, mods: Control, chars: "\x11" }
  - { key: R, mods: Control, chars: "\x12" }
  - { key: S, mods: Control, chars: "\x13" }
  - { key: T, mods: Control, chars: "\x14" }
  - { key: U, mods: Control, chars: "\x15" }
  - { key: V, mods: Control, chars: "\x16" }
  - { key: W, mods: Control, chars: "\x17" }
  - { key: X, mods: Control, chars: "\x18" }
  - { key: Y, mods: Control, chars: "\x19" }
  - { key: Z, mods: Control, chars: "\x1A" }
  - { key: Comma, mods: Control, chars: "\x1b[44;5u" } # C-,

  # Control + Shift + <key> ----------------------------

  - { key: A, mods: Control|Shift, chars: "\x1b[65;6u" }
  - { key: B, mods: Control|Shift, chars: "\x1b[66;6u" }
  - { key: C, mods: Control|Shift, chars: "\x1b[67;6u" }
  - { key: D, mods: Control|Shift, chars: "\x1b[68;6u" }
  - { key: E, mods: Control|Shift, chars: "\x1b[69;6u" }
  - { key: F, mods: Control|Shift, chars: "\x1b[70;6u" }
  - { key: G, mods: Control|Shift, chars: "\x1b[71;6u" }
  - { key: H, mods: Control|Shift, chars: "\x1b[72;6u" }
  - { key: I, mods: Control|Shift, chars: "\x1b[73;6u" }
  - { key: J, mods: Control|Shift, chars: "\x1b[74;6u" }
  - { key: K, mods: Control|Shift, chars: "\x1b[75;6u" }
  - { key: L, mods: Control|Shift, chars: "\x1b[76;6u" }
  - { key: M, mods: Control|Shift, chars: "\x1b[77;6u" }
  - { key: N, mods: Control|Shift, chars: "\x1b[78;6u" }
  - { key: O, mods: Control|Shift, chars: "\x1b[79;6u" }
  - { key: P, mods: Control|Shift, chars: "\x1b[80;6u" }
  - { key: Q, mods: Control|Shift, chars: "\x1b[81;6u" }
  - { key: R, mods: Control|Shift, chars: "\x1b[82;6u" }
  - { key: S, mods: Control|Shift, chars: "\x1b[83;6u" }
  - { key: T, mods: Control|Shift, chars: "\x1b[84;6u" }
  - { key: U, mods: Control|Shift, chars: "\x1b[85;6u" }
  - { key: V, mods: Control|Shift, chars: "\x1b[86;6u" }
  - { key: W, mods: Control|Shift, chars: "\x1b[87;6u" }
  - { key: X, mods: Control|Shift, chars: "\x1b[88;6u" }
  - { key: Y, mods: Control|Shift, chars: "\x1b[89;6u" }
  - { key: Z, mods: Control|Shift, chars: "\x1b[90;6u" }

  # Control + Alt + <key> ----------------------------

  - { key: A, mods: Control|Alt, chars: "\x1b\x01" }
  - { key: B, mods: Control|Alt, chars: "\x1b\x02" }
  - { key: C, mods: Control|Alt, chars: "\x1b\x03" }
  - { key: D, mods: Control|Alt, chars: "\x1b\x04" }
  - { key: E, mods: Control|Alt, chars: "\x1b\x05" }
  - { key: F, mods: Control|Alt, chars: "\x1b\x06" }
  - { key: G, mods: Control|Alt, chars: "\x1b\x07" }
  - { key: H, mods: Control|Alt, chars: "\x1b\x08" }
  - { key: I, mods: Control|Alt, chars: "\x1b\x09" }
  - { key: J, mods: Control|Alt, chars: "\x1b\x0A" }
  - { key: K, mods: Control|Alt, chars: "\x1b\x0B" }
  - { key: L, mods: Control|Alt, chars: "\x1b\x0C" }
  - { key: M, mods: Control|Alt, chars: "\x1b\x0D" }
  - { key: N, mods: Control|Alt, chars: "\x1b\x0E" }
  - { key: O, mods: Control|Alt, chars: "\x1b\x0F" }
  - { key: P, mods: Control|Alt, chars: "\x1b\x10" }
  - { key: Q, mods: Control|Alt, chars: "\x1b\x11" }
  - { key: R, mods: Control|Alt, chars: "\x1b\x12" }
  - { key: S, mods: Control|Alt, chars: "\x1b\x13" }
  - { key: T, mods: Control|Alt, chars: "\x1b\x14" }
  - { key: U, mods: Control|Alt, chars: "\x1b\x15" }
  - { key: V, mods: Control|Alt, chars: "\x1b\x16" }
  - { key: W, mods: Control|Alt, chars: "\x1b\x17" }
  - { key: X, mods: Control|Alt, chars: "\x1b\x18" }
  - { key: Y, mods: Control|Alt, chars: "\x1b\x19" }
  - { key: Z, mods: Control|Alt, chars: "\x1b\x1A" }

  # Control + Alt + Shift + <key> --------------------------
  # Note that as a convention we reserve C-M-S- (as well as C-M-) to tmux
  # keybindings. So these bindings rarely get used by other CLI programs that we
  # use (because we don't like having the same bindings do different things
  # based on whether we're running inside tmux or not).

  - { key: A, mods: Control|Alt|Shift, chars: "\x1b[65;8u" }
  - { key: B, mods: Control|Alt|Shift, chars: "\x1b[66;8u" }
  - { key: C, mods: Control|Alt|Shift, chars: "\x1b[67;8u" }
  - { key: D, mods: Control|Alt|Shift, chars: "\x1b[68;8u" }
  - { key: E, mods: Control|Alt|Shift, chars: "\x1b[69;8u" }
  - { key: F, mods: Control|Alt|Shift, chars: "\x1b[70;8u" }
  - { key: G, mods: Control|Alt|Shift, chars: "\x1b[71;8u" }
  - { key: H, mods: Control|Alt|Shift, chars: "\x1b[72;8u" }
  - { key: I, mods: Control|Alt|Shift, chars: "\x1b[73;8u" }
  - { key: J, mods: Control|Alt|Shift, chars: "\x1b[74;8u" }
  - { key: K, mods: Control|Alt|Shift, chars: "\x1b[75;8u" }
  - { key: L, mods: Control|Alt|Shift, chars: "\x1b[76;8u" }
  - { key: M, mods: Control|Alt|Shift, chars: "\x1b[77;8u" }
  - { key: N, mods: Control|Alt|Shift, chars: "\x1b[78;8u" }
  - { key: O, mods: Control|Alt|Shift, chars: "\x1b[79;8u" }
  - { key: P, mods: Control|Alt|Shift, chars: "\x1b[80;8u" }
  - { key: Q, mods: Control|Alt|Shift, chars: "\x1b[81;8u" }
  - { key: R, mods: Control|Alt|Shift, chars: "\x1b[82;8u" }
  - { key: S, mods: Control|Alt|Shift, chars: "\x1b[83;8u" }
  - { key: T, mods: Control|Alt|Shift, chars: "\x1b[84;8u" }
  - { key: U, mods: Control|Alt|Shift, chars: "\x1b[85;8u" }
  - { key: V, mods: Control|Alt|Shift, chars: "\x1b[86;8u" }
  - { key: W, mods: Control|Alt|Shift, chars: "\x1b[87;8u" }
  - { key: X, mods: Control|Alt|Shift, chars: "\x1b[88;8u" }
  - { key: Y, mods: Control|Alt|Shift, chars: "\x1b[89;8u" }
  - { key: Z, mods: Control|Alt|Shift, chars: "\x1b[90;8u" }

  # When exiting Vi mode, scroll to the very bottom first to restore
  # pre-Vi-mode context.
  - { key: Q,         mode:  Vi,                      action: ScrollToBottom       }
  - { key: Q,         mode:  Vi,                      action: ToggleViMode         }
  # Quick navigation. This is like 10j or 10k in Vim's normal mode, but with one
  # keystroke.
  - { key: Back,      mode:  Vi,                      action: Up   }
  - { key: Back,      mode:  Vi,                      action: Up   }
  - { key: Back,      mode:  Vi,                      action: Up   }
  - { key: Back,      mode:  Vi,                      action: Up   }
  - { key: Back,      mode:  Vi,                      action: Up   }
  - { key: Back,      mode:  Vi,                      action: Up   }
  - { key: Back,      mode:  Vi,                      action: Up   }
  - { key: Back,      mode:  Vi,                      action: Up   }
  - { key: Back,      mode:  Vi,                      action: Up   }
  - { key: Back,      mode:  Vi,                      action: Up   }
  - { key: Space,     mode:  Vi,                      action: Down   }
  - { key: Space,     mode:  Vi,                      action: Down   }
  - { key: Space,     mode:  Vi,                      action: Down   }
  - { key: Space,     mode:  Vi,                      action: Down   }
  - { key: Space,     mode:  Vi,                      action: Down   }
  - { key: Space,     mode:  Vi,                      action: Down   }
  - { key: Space,     mode:  Vi,                      action: Down   }
  - { key: Space,     mode:  Vi,                      action: Down   }
  - { key: Space,     mode:  Vi,                      action: Down   }
  - { key: Space,     mode:  Vi,                      action: Down   }
